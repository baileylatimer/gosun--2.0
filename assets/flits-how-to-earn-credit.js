"/account"==location.pathname&&(!function(a,b){a=a||"docReady";var c=[],d=!1,e=!1;function f(){if(!d){d=!0;for(var a=0;a<c.length;a++)c[a].fn.call(window,c[a].ctx);c=[]}}function g(){"complete"===document.readyState&&f()}(b=b||window)[a]=function(a,b){if("function"!=typeof a)throw new TypeError("callback for docReady(fn) must be a function");d?setTimeout(function(){a(b)},1):(c.push({fn:a,ctx:b}),"complete"===document.readyState?setTimeout(f,1):e||(document.addEventListener?(document.addEventListener("DOMContentLoaded",f,!1),window.addEventListener("load",f,!1)):(document.attachEvent("onreadystatechange",g),window.attachEvent("onload",f)),e=!0))}}("flits_docReady",window),window.flitsApp&& void 0!==window.flitsApp||(window.flitsApp={}),window.flitsApp.how_to_earn_credit=function(){this.that=this,this.get_rule_url="/get_rule",this.div_code_class="flits-credit-code-div",this.flits_token="",this.user_url="",this.appendDiv=function(){var a=document.querySelector(".flits-pages"),b=document.querySelector(".flits-how-to-earn-credit-extra-data .flits-div div");b&&a&&a.append(b)},this.appendAnchor=function(){var b=document.querySelector(".flits-how-to-earn-credit-extra-data .flits-anchor a"),a=document.querySelector('.flits-nav a[data-href="#flits-page-credits"]');b&&a&&a.parentNode.insertBefore(b,a)},this.openRuleTab=function(d,e){var a,c,b;for(a=0,c=document.getElementsByClassName("flits-earn-credit-tabcontent");a<c.length;a++)c[a].style.display="none";for(a=0,b=document.getElementsByClassName("flits-earn-credit-tablinks");a<b.length;a++)b[a].className=b[a].className.replace(" flits-active","");document.getElementById(e).style.display="block",d.target.className+=" flits-active"},this.init=function(){this.user_url=document.getElementById("flits-customer-url").value,this.flits_token=document.getElementById("flits-token").value},this.init(),this.get_ajax_obj=function(){return window.XMLHttpRequest?new XMLHttpRequest:window.ActiveXObject?new ActiveXObject("Microsoft.XMLHTTP"):void 0},this.serialize=function(b){var c=[];for(var a in b)if(b.hasOwnProperty(a)){if("object"==typeof b[a]||"array"==typeof b[a])for(var d in b[a])c.push(encodeURIComponent(a+"["+d+"]")+"="+encodeURIComponent(b[a][d]));else c.push(encodeURIComponent(a)+"="+encodeURIComponent(b[a]))}return c.join("&")},this.parseHTML=function(a){if(!a)return document.createElement("div");var b=document.createElement("html");return b.innerHTML="<html><head><title>titleTest</title></head><body><div>"+a+"</div></body></html>",b.querySelector("body div")},this.get_rules=function(){var a=window.flitsApp.how_to_earn_credit_obj,c=a.user_url+a.get_rule_url,b=a.get_ajax_obj();b.onreadystatechange=function(){if(4==this.readyState){if(200==this.status){var b=JSON.parse(this.responseText);a.set_rules_div(b.rules)}else error}},b.open("POST",c,!0),b.setRequestHeader("Content-type","application/x-www-form-urlencoded");var d=a.serialize({customer_hash:window.flitsApp.customer_hash,token:a.flits_token});b.send(d)},this.set_rules_div=function(m){this.appendDiv();for(var e=m.all_rules_data,f=flitsAppJquery("#flits-shop-money-format").val(),g=0;g<e.length;g++){var d=flitsAppJquery(".flits-rule-meta-data").clone().removeClass("flits-rule-meta-data flits-hidden"),a=e[g];if(a.is_default_rule){var n=a.title,o=a.description,p=window.flitsApp.multilang_how_to_earn[n],q=window.flitsApp.multilang_how_to_earn[o],r=window.flitsApp.multilang_how_to_earn.or_more,b=a.credits;a.is_fixed?b=window.flitsApp.formatMoney(Math.abs(b),f).replace(/((\,00)|(\.00))$/g,""):(b/=100,b+="%");var j=p.replace("##credits##",b).replace("##order_number##",a.column_value),c=q.replace("##credits##",b).replace("##order_number##",a.column_value),s=flitsAppJquery("<span/>");if("product_tag"==a.module_on&&(flitsAppJquery(a.avails).each(function(b,a){var c=flitsAppJquery('<a href="/search?q='+a+'" target="_blank">'+a+"</a>");b>0&&s.append(","),s.append(c)}),c=c.replace("##tag##",s.html())),"cart"==a.module_on){var h=a.column_value.split(":"),t=window.flitsApp.formatMoney(Math.abs(100*h[0]),f).replace(/((\,00)|(\.00))$/g,""),k=window.flitsApp.formatMoney(Math.abs(100*h[1]),f).replace(/((\,00)|(\.00))$/g,""),l="##max_cart_value##";"-1"==h[1]&&(l="to ##max_cart_value##",k=r),c=c.replace("##min_cart_value##",t).replace(l,k)}}else var j=a.title,c=a.description;d.find(".flits-rule-details").html(j),d.find(".flits-rule-credit").html(c),d.find(".flits-rule-image").attr("src",a.image),a.is_earned&&d.find(".flits-rule-box").addClass("flits-earned-rule flits-z-dept-1"),flitsAppJquery("."+a.tab_to_append).attr("disabled",!1),flitsAppJquery("."+a.tab_to_append).attr("title",""),flitsAppJquery("#"+a.tab_to_append).append(d),"flits_from_admin_rules"==a.tab_to_append&&flitsAppJquery("button.flits_from_admin_rules").removeClass("flits-hidden")}var i=location.hash.replace("#","");e.length>0?(this.appendAnchor(),"earn-credit"==i&&document.querySelector("[data-href='#flits-page-"+i+"']").click(),flitsAppJquery(".flits-earn-credit-tab").find("."+e[0].tab_to_append).click()):"earn-credit"==i&&document.querySelector("[data-href='#flits-page-orders']").click()}},flits_docReady(function(){window.flitsApp.how_to_earn_interval=setInterval(function(){"undefined"==typeof flitsAppJquery||(clearInterval(window.flitsApp.how_to_earn_interval),window.flitsApp.how_to_earn_credit_obj=new window.flitsApp.how_to_earn_credit,window.flitsApp.how_to_earn_credit_obj.get_rules(),flitsAppJquery(".flits_earning_rules").click())},1e3)}))