window.flitsApp&& void 0!==window.flitsApp||(window.flitsApp={}),window.flitsApp.recently_viewed_products=function(){var a="flits_recently_products",b="flits-recently-products-ul",c=[],d=this;this.setCookie=function(b,c,d){var a=new Date;a.setTime(a.getTime()+864e5*d);var e="expires="+a.toUTCString();document.cookie=b+"="+c+";"+e+";path=/"},this.getCookie=function(e){for(var c=e+"=",d=decodeURIComponent(document.cookie).split(";"),b=0;b<d.length;b++){for(var a=d[b];" "==a.charAt(0);)a=a.substring(1);if(0==a.indexOf(c))return a.substring(c.length,a.length)}return""},this.get_ajax_obj=function(){return window.XMLHttpRequest?new XMLHttpRequest:window.ActiveXObject?new ActiveXObject("Microsoft.XMLHTTP"):void 0},this.setProductData=function(){var b=flitsAppJquery("#flits-shop-money-format").val(),a=flitsAppJquery;a("[data-flits-recently-product-handle]").each(function(d,e){var f=a(this),c=a(this).attr("data-flits-recently-product-handle");a.ajax({method:"get",url:"/products/"+c+".json",success:function(g){var d=g.product,c="https://cdn.shopify.com/s/assets/no-image-2048-5e88c1b20e087fb7bbe9a3771824e743c244f437e4f8ba93bbf7b11b53f7824c.gif";null!=d.image&&(c=d.image.src);var h=c.lastIndexOf("."),e=c.substr(h);c=c.replace(e,"_200x_crop_center"+e),a(f).find(".flits-product-img").css({background:"url("+c+")","background-size":"contain","background-repeat":"no-repeat","background-position":"center center","background-image":c});var i=0;a.each(d.variants,function(j,c){var h=window.flitsApp.formatMoney(Math.abs(100*c.price),b).replace(/((\,00)|(\.00))$/g,""),g=c.title;1==d.variants.length&&"Default Title"==g&&(g=d.title);var e=a("<option/>");e.html(g),e.attr("value",c.id),e.attr("data-variant-price",h),a.ajax({method:"get",url:location.origin+"/products/"+d.handle+"?view=flits_product_variant_data&variant="+c.id,success:function(g){var h=new DOMParser().parseFromString(g,"text/html"),b=JSON.parse(h.querySelector(".flits-product-variant-data").innerHTML);if("shopify"==b.inventory_management&&"deny"==b.inventory_policy&&b.inventory_quantity<=0){var d=a(f).find(".flits-add-to-cart"),c=d.attr("data-flits-sold-out-text");e.html(e.html()+" - "+c),-1!=a(f).find(".flits-product-variant-options option:selected").html().indexOf(c)&&d.addClass("flits-btn-danger").attr("disabled",!0).html(c)}},error:function(){}}),i<=0&&(i=h),a(f).find(".flits-product-variant-options").append(e)}),a(f).find(".flits-product-variant-title").append(d.title),a(f).find(".flits-product-variant-price").append(i),a(f).attr("title",d.title)},error:function(){a(f).remove()}})})},this.update_div=function(){if("/account"==location.pathname&&(window.flitsApp.set_recently_view_add_change_event(),window.flitsApp.set_recently_view_add_click_event()),null==document.getElementById(b))return!1;var a=this.get_all_display_product();a.length>0?(flitsAppJquery(".flits-recently-view-empty").hide(),flitsAppJquery("#"+b).show(),a.forEach(function(c,d){var a=flitsAppJquery(".flits-recently-products-li-structure").clone();a.removeClass("flits-recently-products-li-structure"),a.addClass("flits-recently-product-row"),a.find(".flits-product-title-anchor").attr("href","/products/"+c),a.attr("data-flits-recently-product-handle",c),flitsAppJquery("#"+b).append(a)}),d.setProductData()):(flitsAppJquery(".flits-recently-view-empty").show(),flitsAppJquery("#"+b).hide())},this.change_position_of_elments=function(){for(var c=document.getElementById(b),a=0;a<c.children.length;a++)c.children[a].setAttribute("data-position",a);for(var a=0;a<c.children.length;a++)a>8&&c.children[a].remove()},this.update_products=function(){var b=this.getCookie(a);c=""===b.trim()?[]:JSON.parse(b)},this.isFull=function(){return 8==c.length},this.is_present=function(b){for(var a=0;a<c.length;a++)if(c[a]==b)return a;return -1},this.remove_product=function(a){1==c.length?c=[]:c.splice(a,1)},this.remove_first_product=function(){if(0!=c.length){var a=c[0];return c.splice(0,1),a}},this.save_products=function(){this.setCookie(a,JSON.stringify(c),15),this.update_div()},this.add_product=function(a){this.update_products();var b=this.is_present(a);-1!==b&&this.remove_product(b),this.isFull()&&this.remove_first_product(),c.push(a),this.save_products()},this.get_all_product=function(){return this.update_products(),c},this.get_all_display_product=function(){return this.update_products(),c.slice().reverse()},this.update_products(),this.update_div()},window.flitsApp.set_recently_view_add_change_event=function(){flitsAppJquery(document).on("change",".flits-recently-product-row .flits-product-variant-options",function(f){var c=this.options[this.selectedIndex].getAttribute("data-variant-price");this.closest(".flits-row").parentNode.querySelector(".flits-product-variant-price").innerHTML=c;var b="",a=this.closest(".flits-row").parentNode.querySelector(".flits-add-to-cart"),d=this.options[this.selectedIndex].innerHTML,e=a.getAttribute("data-flits-sold-out-text");-1!=d.indexOf(e)?(b=a.getAttribute("data-flits-sold-out-text"),a.disabled=!0,a.classList.add("flits-btn-danger")):(b=a.getAttribute("data-flits-add-to-cart-text"),a.disabled=!1,a.classList.remove("flits-btn-danger")),a.innerHTML=b})},window.flitsApp.set_recently_view_add_click_event=function(){flitsAppJquery(document).on("click",".flits-recently-product-row .flits-product-quantity-adjuster",function(d){var b=this,c=b.parentNode.querySelector(".flits-product-quantity-num"),a=parseInt(c.value);a=flits_validate_quantity(a),qtyMin=1,b.classList.contains("flits-product-quantity-add")?a+=1:a=a<=qtyMin?qtyMin:a-1,c.value=a}),flits_validate_quantity=function(a){return parseFloat(a)!=parseInt(a)||isNaN(a)?1:a}},window.flitsApp.recently_view_products_interval=setInterval(function(){"undefined"==typeof flitsAppJquery||(clearInterval(window.flitsApp.recently_view_products_interval),window.flitsApp.recently_viewed_products())},1e3)