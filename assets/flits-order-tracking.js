window.flitsApp&& void 0!==window.flitsApp||(window.flitsApp={}),window.flitsApp.run_after_jquery=function(a){var b=setInterval(function(){"undefined"==typeof flitsAppJquery||(clearInterval(b),"function"==typeof a&&a())},1e3)},window.flitsApp.getShipmentDetails=function(){var a="/get_order_shipment";a=flitsAppJquery("#flits-order-shipment-url").val()+a,window.flitsApp.tracking_details=[],window.flitsApp.tracking_numbers=[],flitsAppJquery("a.flits-order-tracking").each(function(h,b){var a=flitsAppJquery(b).attr("data-tracking-number"),c=flitsAppJquery(b).attr("data-order-id"),e=flitsAppJquery(b).attr("data-line-item-id"),d=flitsAppJquery(b).closest(".flits-order-items-row"),f=flitsAppJquery(d).children(".flits-order-item").length,g=flitsAppJquery(d).find(".flits-order-tracking[data-tracking-number="+a+"]").length;(void 0==window.flitsApp.tracking_details[a]||"line_item"==window.flitsApp.tracking_details[a].type)&&window.flitsApp.tracking_numbers.push(a),f==g?(flitsAppJquery('[data-append-tracking-id="'+c+'"]').find(".flits-order-track-content").removeClass("flits-hidden"),window.flitsApp.tracking_details[a]={type:"order",id:c}):(flitsAppJquery('[data-append-tracking-id="'+c+'"]').addClass("flits-hidden"),flitsAppJquery(d).find(".flits-order-item").find(".flits-order-track-content").removeClass("flits-hidden"),window.flitsApp.tracking_details[a]={type:"line_item",id:e})}),1==flitsAppJquery("#flits-order-tracking-paid").val()&&1==flitsAppJquery("#flits-order-tracking-enable").val()?flitsAppJquery.each(window.flitsApp.tracking_numbers,function(c,b){window.flitsApp.setOrderTracking({display:"tracking_status",is_paid:!0,order_tracking_data:{tracking_number:b,tracking_status:"Ordered"},status:!0},window.flitsApp.tracking_details),flitsAppJquery.ajax({url:a,method:"POST",data:{token:flitsAppJquery("#flits-token").val(),tracking_number:b},success:function(a){if(a.status){if(null!=a.order_tracking_data&&"tracking_status"==a.display){var c=a;window.flitsApp.setOrderTracking(c,window.flitsApp.tracking_details)}else"tracking_button"==a.display&&(d=window.flitsApp.setOrderTrackingButton(b),window.flitsApp.appendTrackingDiv(d,b,window.flitsApp.tracking_details,!0),flitsAppJquery(".flits_append_tracking").addClass("flits-hidden"))}else{var d=flitsAppJquery("<div class='flits-order-tracking-error-msg'/>").html(a.error),e=window.flitsApp.tracking_details[b].id;window.flitsApp.tracking_details[b].type,flitsAppJquery(".flits_append_tracking[data-append-tracking-id="+e+"]").append(d).removeClass("flits-hidden")}},error:function(a){a.status}})}):flitsAppJquery.each(window.flitsApp.tracking_numbers,function(c,a){var b=window.flitsApp.setOrderTrackingButton(a);window.flitsApp.appendTrackingDiv(b,a,window.flitsApp.tracking_details,!0)})},window.flitsApp.setOrderTracking=function(a,e){var c=a.order_tracking_data.tracking_number,b="",d=!1;a.is_paid?b=window.flitsApp.setOrderTrackingContent(a):(d=!0,b=window.flitsApp.setOrderTrackingButton(c)),window.flitsApp.appendTrackingDiv(b,c,e,d)},window.flitsApp.setOrderTrackingContent=function(b){var c=b.order_tracking_data.tracking_status,a=flitsAppJquery(".flits-order-track-content.flits-template").clone().removeClass("flits-template");return a.find("ul.flits-order-track-ul").attr("data-flits-active",c),a},window.flitsApp.setOrderTrackingButton=function(a){var b=flitsAppJquery("#flits-order-tracking-domain").val(),c=flitsAppJquery("<a/>").attr("href",b+"/"+a).attr("target","_blank").addClass("flits-btn-inline flits-btn-danger flits-btn-custom flits-btn").html(window.flitsApp.multilang.order_tracking.track_btn);return c},window.flitsApp.appendTrackingDiv=function(b,c,d,f){var e=d[c].id,a=null;if(null!==(a="order"==d[c].type&&f?flitsAppJquery(".flits_append_tracking_btn[data-append-tracking-id="+e+"]"):flitsAppJquery(".flits_append_tracking[data-append-tracking-id="+e+"]"))){if(flitsAppJquery(a).find(".flits-order-track-ul").length>0){var g=flitsAppJquery(b).find(".flits-order-track-ul").attr("data-flits-active");flitsAppJquery(a).find(".flits-order-track-ul").attr("data-flits-active",g),flitsAppJquery(a).removeClass("flits-hidden")}else a.append(b).removeClass("flits-hidden")}},window.flitsApp.run_after_jquery(window.flitsApp.getShipmentDetails)